(this.webpackJsonplox=this.webpackJsonplox||[]).push([[0],{38:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),i=a(19),r=a.n(i),l=(a(38),a(10)),c=a(11),o=a(13),d=a(12),h=(a(39),a(48)),u=a(53),p=a(50),j=a(52),b=a(54),x=a(51),m=a(47),y=a(31),O=a(49),_=(a(40),a(1)),v=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onChange",value:function(e){this.props.onChange&&this.props.onChange(this.props.item,e.target.value)}},{key:"render",value:function(){return Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:this.props.label}),Object(_.jsx)(y.a,{readOnly:this.props.readonly,type:"number",value:this.props.value,"aria-label":this.props.tooltip,onChange:this.onChange.bind(this)}),this.props.suffix?Object(_.jsx)(m.a.Text,{children:this.props.suffix}):null]})}}]),a}(s.Component),g=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onChangeCylinderCount",value:function(e){this.props.onChange&&this.props.onChange(this.props.id,"cylinder_count",e.target.value)}},{key:"onChangeCylinderVolume",value:function(e){this.props.onChange&&this.props.onChange(this.props.id,"cylinder_volume",e.target.value)}},{key:"onChangeCylinderATM",value:function(e){this.props.onChange&&this.props.onChange(this.props.id,"cylinder_atm",e.target.value)}},{key:"removeCylinder",value:function(e){this.props.removeCylinder(this.props.id)}},{key:"render",value:function(){return Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsxs)(m.a.Text,{children:["Set ",this.props.id+1]}),Object(_.jsx)(m.a.Text,{children:"#"}),Object(_.jsx)(y.a,{type:"number",value:this.props.cylinder_count,"aria-label":"",onChange:this.onChangeCylinderCount.bind(this)}),Object(_.jsx)(m.a.Text,{children:"Cylinders with Volume"}),Object(_.jsx)(y.a,{type:"number",value:this.props.cylinder_volume,"aria-label":"",onChange:this.onChangeCylinderVolume.bind(this)}),Object(_.jsx)(m.a.Text,{children:"litres at full pressure"}),Object(_.jsx)(y.a,{type:"number",value:this.props.cylinder_atm,"aria-label":"",onChange:this.onChangeCylinderATM.bind(this)}),Object(_.jsx)(m.a.Text,{children:"ATM"}),Object(_.jsx)(y.a,{type:"button",value:"-",className:"removeCylinder",onClick:this.removeCylinder.bind(this)})]})}}]),a}(s.Component),f=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(c.a)(a,[{key:"onFlowReqChange",value:function(e){this.props.onChangeDemand(this.props.id,"flow_req",e.target.value)}},{key:"onPatientsChange",value:function(e){this.props.onChangeDemand(this.props.id,"patients",e.target.value)}},{key:"render",value:function(){return Object(_.jsxs)("tr",{children:[Object(_.jsx)("td",{className:"text-sm-start align-middle form-control-sm",children:this.props.what}),Object(_.jsx)("td",{children:Object(_.jsx)(y.a,{type:"number",value:this.props.patients,"aria-label":this.props.tooltip,onChange:this.onPatientsChange.bind(this)})}),Object(_.jsx)("td",{className:"text-sm-center align-middle form-control-sm",children:this.props.criterion}),Object(_.jsx)("td",{children:Object(_.jsx)(y.a,{type:"number",value:this.props.flow_req,"aria-label":this.props.tooltip,onChange:this.onFlowReqChange.bind(this)})}),Object(_.jsx)("td",{children:Object(_.jsx)(y.a,{type:"number",value:this.props.use_per_category||this.props.patients*this.props.flow_req,"aria-label":this.props.tooltip,readOnly:!0})})]})}}]),a}(s.Component),C=a(30),T=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(e){var s;Object(l.a)(this,a);var n=(s=t.call(this,e)).getSavedState();return s.state=n||{vie_total_supply:47,lox_exp_ratio:861,lox_l_per_kg:.8767,ambient_pressure:1013,cylinders:[{cylinder_count:1,cylinder_volume:2,cylinder_atm:134}],litres_per_min_use:1835,tons_per_day_usage:3.5,litres_per_min_capacity:3e3,demand_prediction:[{what:"Ventilated patients",criterion:"liters/min per vent:",patients:30,flow_req:40},{what:"CPAP systems",criterion:"",patients:10,flow_req:30},{what:"HFNC systems",criterion:"",patients:6,flow_req:60},{what:"Face-mask Oxygen",criterion:"",patients:50,flow_req:10},{what:'"Double-barrel" NPO2:',criterion:"",patients:5,flow_req:15},{what:"Patients on NPO2",criterion:"liters/min per pt:",patients:20,flow_req:5},{what:"Patients under anaesthesia",criterion:"liters/min average:",patients:10,flow_req:2}],saveAlert:!1},s}return Object(c.a)(a,[{key:"onChange",value:function(e,t){var a={};a[e]=t,this.setState(a)}},{key:"onChangeCylinder",value:function(e,t,a){var s=this.state;s.cylinders[e][t]=a,this.setState(s)}},{key:"onChangeDemand",value:function(e,t,a){var s=this.state;s.demand_prediction[e][t]=a,this.setState(s)}},{key:"addCylinder",value:function(){var e=this.state.cylinders;e.push({cylinder_count:0,cylinder_volume:0,cylinder_atm:0}),this.setState({cylinders:e})}},{key:"removeCylinder",value:function(e){if(1!==this.state.cylinders.length){var t=this.state.cylinders;t.pop(e),this.setState({cylinders:t})}}},{key:"saveState",value:function(){this.setState({saveAlert:!0});var e=this.state;e.saveAlert=!1,localStorage.setItem("LOxSavedState",JSON.stringify(e)),setTimeout(this.hideSaveAlert.bind(this),2e3)}},{key:"getSavedState",value:function(){return JSON.parse(localStorage.getItem("LOxSavedState"))}},{key:"hideSaveAlert",value:function(){this.setState({saveAlert:!1})}},{key:"render",value:function(){var e=this,t=this.state.lox_exp_ratio*this.state.lox_l_per_kg*1e3,a=Math.round(this.state.vie_total_supply*t),s=this.state.cylinders.map((function(e){return e.cylinder_volume*e.cylinder_atm*e.cylinder_count})).reduce((function(e,t,a){return e+t})),n=this.state.cylinders.map((function(t,a){return Object(_.jsx)(g,{id:a,cylinder_count:t.cylinder_count,cylinder_volume:t.cylinder_volume,cylinder_atm:t.cylinder_atm,removeCylinder:e.removeCylinder.bind(e),onChange:e.onChangeCylinder.bind(e)},a)}));return Object(_.jsxs)("div",{className:"App",children:[Object(_.jsx)(h.a,{variant:"secondary",style:{position:"fixed",right:"70px",top:"5px"},onClick:this.saveState.bind(this),children:Object(_.jsx)(C.a,{size:20})}),Object(_.jsxs)("header",{className:"App-header",children:["Oxygen supply/demand calculator",Object(_.jsx)("div",{className:"subHeader text-secondary",children:"Figures entered here are for GSH but feel free to copy and use"}),Object(_.jsx)("br",{})]}),Object(_.jsxs)("body",{className:"App-body",children:[this.state.saveAlert?Object(_.jsx)(u.a,{variant:"success",className:"btn-sm",onClose:this.hideSaveAlert.bind(this),dismissable:!0,children:" Saved to browser storage "},"saved"):null,Object(_.jsx)(p.a,{style:{width:"836px"},children:Object(_.jsxs)(j.a,{defaultActiveKey:"0",children:[Object(_.jsx)(j.a.Toggle,{as:h.a,variant:"secondary",eventKey:"config",style:{position:"fixed",right:"10px",top:"5px"},children:Object(_.jsx)(C.b,{size:20})}),Object(_.jsx)(j.a.Collapse,{eventKey:"config",children:Object(_.jsx)(b.a,{className:"extra-margin",children:Object(_.jsxs)(b.a.Body,{children:[Object(_.jsx)(v,{label:"Ambient Pressure",value:this.state.ambient_pressure,onChange:this.onChange.bind(this),item:"ambient_pressure",suffix:"mBar"}),Object(_.jsx)(v,{label:"LOx - Expansion Ratio",value:this.state.lox_exp_ratio,onChange:this.onChange.bind(this),item:"lox_exp_ratio",suffix:"x STP"}),Object(_.jsx)(v,{label:"LOx - Litre per KG",value:this.state.lox_l_per_kg,onChange:this.onChange.bind(this),item:"lox_l_per_kg",suffix:"Litres"})]})})}),Object(_.jsxs)(b.a,{children:[Object(_.jsx)(b.a.Header,{children:"Supply"}),Object(_.jsxs)(b.a.Body,{children:[Object(_.jsx)("span",{className:"subHeader",children:"LOx Supply"}),Object(_.jsx)(v,{label:"VIE Total Supply",value:this.state.vie_total_supply,tooltip:"",onChange:this.onChange.bind(this),item:"vie_total_supply",suffix:"tons (excludes 1 ton minimum remaining volume)",children:"test"}),Object(_.jsx)(v,{label:"VIE Total Supply",value:a,tooltip:"",suffix:"litres (at ambient)",readonly:!0}),Object(_.jsx)("span",{className:"subHeader",children:"Bank Supply"}),Object(_.jsx)("br",{}),Object(_.jsx)(x.a,{children:Object(_.jsxs)(x.a.Item,{children:[n,Object(_.jsx)(h.a,{variant:"secondary",onClick:this.addCylinder.bind(this),style:{float:"left"},size:"sm",children:" + "})]})}),Object(_.jsx)(v,{label:"at Full Pressure",value:s,tooltip:"",suffix:"Litres at ambient",readonly:!0})]})]}),Object(_.jsxs)(b.a,{className:"extra-margin",children:[Object(_.jsx)(b.a.Header,{children:"Usage"}),Object(_.jsxs)(b.a.Body,{children:[Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"LOx used at"}),Object(_.jsx)(y.a,{type:"number",value:this.state.tons_per_day_usage,onChange:function(t){e.onChange("tons_per_day_usage",t.target.value)},onBlur:function(a){e.onChange("litres_per_min_use",(a.target.value*t/1440).toFixed(2))}}),Object(_.jsx)(m.a.Text,{children:"Tons/Day"}),Object(_.jsx)(y.a,{type:"number",value:this.state.litres_per_min_use,onChange:function(t){e.onChange("litres_per_min_use",t.target.value)},onBlur:function(a){e.onChange("tons_per_day_usage",(24*a.target.value*60/t).toFixed(2))}}),Object(_.jsx)(m.a.Text,{children:"litres/min average"})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"LOx Supplied from Engineering:"}),Object(_.jsx)(y.a,{type:"number",value:this.state.litres_per_min_capacity,onChange:function(t){e.onChange("litres_per_min_capacity",t.target.value)}})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"LOx available at current rate:"}),Object(_.jsx)(y.a,{type:"number",value:((a+s)/this.state.litres_per_min_use).toFixed(1)}),Object(_.jsx)(m.a.Text,{children:"Max Rate based on Supply:"}),Object(_.jsx)(y.a,{type:"number",value:((a+s)/this.state.litres_per_min_capacity).toFixed(1)}),Object(_.jsx)(m.a.Text,{children:"Minutes"})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"LOx available at current rate:"}),Object(_.jsx)(y.a,{type:"number",value:((a+s)/this.state.litres_per_min_use/60).toFixed(1)}),Object(_.jsx)(m.a.Text,{children:"Max Rate based on Supply:"}),Object(_.jsx)(y.a,{type:"number",value:((a+s)/this.state.litres_per_min_capacity/60).toFixed(1)}),Object(_.jsx)(m.a.Text,{children:"Hours"})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"LOx available at current rate:"}),Object(_.jsx)(y.a,{type:"number",value:((a+s)/this.state.litres_per_min_use/60/24).toFixed(1)}),Object(_.jsx)(m.a.Text,{children:"Max Rate based on Supply:"}),Object(_.jsx)(y.a,{type:"number",value:((a+s)/this.state.litres_per_min_capacity/60/24).toFixed(1)}),Object(_.jsx)(m.a.Text,{children:"Days"})]})]})]}),Object(_.jsxs)(b.a,{className:"extra-margin",children:[Object(_.jsx)(b.a.Header,{children:"Demand Prediction"}),Object(_.jsxs)(b.a.Body,{children:[Object(_.jsxs)(O.a,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(_.jsx)("thead",{children:Object(_.jsxs)("tr",{children:[Object(_.jsx)("th",{style:{width:"200px"}}),Object(_.jsx)("th",{style:{width:"100px"},className:"form-control-sm",children:"Patients"}),Object(_.jsx)("th",{style:{width:"250px"},className:"form-control-sm",children:"Criterion"}),Object(_.jsx)("th",{className:"form-control-sm",children:"Flow req"}),Object(_.jsx)("th",{className:"form-control-sm",children:"Use per category"})]})}),Object(_.jsxs)("tbody",{children:[Object(_.jsx)(f,{what:"Leakage/Loss",criterion:"liters/min (estimated):",patients:"0.5% of current flow rate",id:"leakage",flow_req:.005*this.state.litres_per_min_use,use_per_category:.005*this.state.litres_per_min_use,onChangeDemand:this.onChangeDemand.bind(this)},"leakage"),this.state.demand_prediction.map((function(t,a){return Object(_.jsx)(f,{what:t.what,criterion:t.criterion,patients:t.patients,id:a,flow_req:t.flow_req,onChangeDemand:e.onChangeDemand.bind(e)},a)}))]})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"Total Use"}),Object(_.jsx)(y.a,{type:"number",value:.005*this.state.litres_per_min_use+this.state.demand_prediction.map((function(e){return e.flow_req*e.patients})).reduce((function(e,t){return e+t}))}),Object(_.jsx)(m.a.Text,{children:"l/min"})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"Total Use"}),Object(_.jsx)(y.a,{type:"number",value:60*this.state.demand_prediction.map((function(e){return e.flow_req*e.patients})).reduce((function(e,t){return e+t}))}),Object(_.jsx)(m.a.Text,{children:"l/hr"})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"Total Use"}),Object(_.jsx)(y.a,{type:"number",value:60*this.state.demand_prediction.map((function(e){return e.flow_req*e.patients})).reduce((function(e,t){return e+t}))*24}),Object(_.jsx)(m.a.Text,{children:"l/day"})]}),Object(_.jsxs)(m.a,{className:"mb-3",children:[Object(_.jsx)(m.a.Text,{children:"Total Use"}),Object(_.jsx)(y.a,{type:"number",value:60*this.state.demand_prediction.map((function(e){return e.flow_req*e.patients})).reduce((function(e,t){return e+t}))*24/t}),Object(_.jsx)(m.a.Text,{children:"tons/day"})]})]})]})]})}),Object(_.jsxs)("div",{className:"subHeader text-secondary",style:{fontSize:"15px"},children:["Developed by Ross Hofmeyr and coded by Steve Hofmeyr. ",Object(_.jsx)("a",{href:"https://github.com/stevehof/lox",children:"Source Code"})]})]})]})}}]),a}(s.Component),S=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,55)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,i=t.getLCP,r=t.getTTFB;a(e),s(e),n(e),i(e),r(e)}))};r.a.render(Object(_.jsx)(n.a.StrictMode,{children:Object(_.jsx)(T,{})}),document.getElementById("root")),S()}},[[45,1,2]]]);
//# sourceMappingURL=main.fb7315be.chunk.js.map